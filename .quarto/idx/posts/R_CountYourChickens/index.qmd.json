{"title":"Count Your Chickens!","markdown":{"yaml":{"title":"Count Your Chickens!","author":"Milt","date":"2022-10-12","categories":["Data Science/Programming"]},"headingText":"Introduction","containsRefs":false,"markdown":"\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(collapse = TRUE)\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(stringr)\nlibrary(doParallel)\n```\n\n\nWe finally opened up the board game [Count your Chickens](https://www.mindware.orientaltrading.com/count-your-chickens-a2-GM108.fltr?keyword=count+your+chickens), which my daughter received for Christmas. We played a game that we won fairly easily, which got me to thinking how easy is this game? From just our one game it seemed like it was pretty hard to lose so I decided to try to write a program that would simulate the game play and thus allow me to estimate the probability of winning.\n\n### The game rules\n\n**Objective**: Get to the end of the path with \\>= 40 chicks in the coop.\n\n**Game play:**\n\n1.  Spin the spinner\n    1.  If spin == fox\n        1.  remove 1 chick from the coop, next player goes.\n    2.  If spin != fox\n        1.  move your game piece to the next space on the board that contains the item you spun. If there is no matching item, move to the end of the path.\n        2.  The number number of spaces you moved along the board is the number of chicks you pick up along the way.\n        3.  If you land on a bonus square, you get an bonus chick.\n        4.  Next player goes.\n\n**Writing R function to play a round of the game and record the results**\n\n```{r}\nplayGame <-\nfunction(){\n \n  #Create the spinner, game board, and bonus vectors to reference\n  spinner <- c(\"sheep\",\"cow\",\"dog\",\"pig\",\"tractor\",\"fox\")\n  board <- c(\"empty\", \"sheep\", \"pig\", \"tractor\", \"cow\", \"dog\", \"pig\", \"cow\", \"dog\", \"sheep\", \"tractor\",\"empty\", \"cow\", \"pig\",\"empty\",\"empty\",\"empty\",\"tractor\", \"empty\", \"tractor\", \"dog\", \"sheep\",\"cow\", \"dog\", \"pig\", \"tractor\", \"empty\", \"sheep\", \"cow\", \"empty\",\"empty\", \"tractor\", \"pig\",\"sheep\", \"dog\", \"empty\", \"sheep\", \"cow\", \"pig\", \"end\")\n\n  bonus <- rep(0,40)\n  bonus[c(4,8,22,35,39)] <- 1\n\n  #Initialize some iteration variables to store counts to output\n  totalSpaces <- 0;\n  numChicks <- 0\n  totalSpins <- 0\n  numFox <- 0\n  stolenChicks <- 0\n  numBonus <- 0\n\n\n  while(TRUE){\n    #spin the spinner\n    c_spin <- sample(spinner,1)\n    totalSpins <- totalSpins + 1\n \n    #Check if the player spun fox, if so steal a chick if there is one to steal and spin again.\n    if(c_spin == \"fox\"){\n      numChicks <- max(0,numChicks-1)\n      numFox <- numFox + 1\n      next\n    }\n   \n    #find how many spaces it is till the next item spun on the gameboard.\n    cut <- min(which(board==c_spin))\n \n    #If the board ends before the next item spun shows up, it will retun 'Inf' so we'll\n    #just set it to be the remaining number of spaces left on the board.\n    if(cut == \"Inf\") cut <- length(board)\n    totalSpaces <- totalSpaces + cut\n \n    if(bonus[totalSpaces]==1) numBonus <- numBonus + 1\n    numChicks <- numChicks + cut + bonus[totalSpaces]\n    board <- board[-c(1:cut)]\n    if(length(board) == 0){ break}\n  }\n  data.frame(chicks = numChicks, foxes = numFox, bonus = numBonus, spins = totalSpins)\n}\n\n```\n\n**Play 10,000 games and record the results**\n\n```{r}\nregisterDoParallel(cores=7)\nstacked <- foreach(i=1:10000, .combine = rbind) %dopar% playGame()\n\n```\n\n**Plot the results**\n\n```{r}\nwin_prop <- round(mean(stacked$chicks >= 40),2)*100\n\nstacked |>\n  mutate(cc = if_else(chicks >= 40,str_glue(\"Won ({win_prop}%)\"),str_glue(\"Lost ({100-win_prop}%)\"))) |>\n  #count(chicks) |>\n  ggplot(aes(x = chicks, fill = cc)) +\n  geom_histogram(binwidth = 1, color = \"black\") +\n  scale_fill_manual(values = c(\"#8795E8\", \"#FF7FD9\")) +\n  labs(x = \"Total Number of Chicks at end of game\",\n       y = \"Number of Games\",\n       title = str_glue(\"Results of 10,000 games played.\"),\n       title2 = \"sdf\",\n       fill = \"Results\")\n```\n","srcMarkdownNoYaml":"\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(collapse = TRUE)\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(stringr)\nlibrary(doParallel)\n```\n\n### Introduction\n\nWe finally opened up the board game [Count your Chickens](https://www.mindware.orientaltrading.com/count-your-chickens-a2-GM108.fltr?keyword=count+your+chickens), which my daughter received for Christmas. We played a game that we won fairly easily, which got me to thinking how easy is this game? From just our one game it seemed like it was pretty hard to lose so I decided to try to write a program that would simulate the game play and thus allow me to estimate the probability of winning.\n\n### The game rules\n\n**Objective**: Get to the end of the path with \\>= 40 chicks in the coop.\n\n**Game play:**\n\n1.  Spin the spinner\n    1.  If spin == fox\n        1.  remove 1 chick from the coop, next player goes.\n    2.  If spin != fox\n        1.  move your game piece to the next space on the board that contains the item you spun. If there is no matching item, move to the end of the path.\n        2.  The number number of spaces you moved along the board is the number of chicks you pick up along the way.\n        3.  If you land on a bonus square, you get an bonus chick.\n        4.  Next player goes.\n\n**Writing R function to play a round of the game and record the results**\n\n```{r}\nplayGame <-\nfunction(){\n \n  #Create the spinner, game board, and bonus vectors to reference\n  spinner <- c(\"sheep\",\"cow\",\"dog\",\"pig\",\"tractor\",\"fox\")\n  board <- c(\"empty\", \"sheep\", \"pig\", \"tractor\", \"cow\", \"dog\", \"pig\", \"cow\", \"dog\", \"sheep\", \"tractor\",\"empty\", \"cow\", \"pig\",\"empty\",\"empty\",\"empty\",\"tractor\", \"empty\", \"tractor\", \"dog\", \"sheep\",\"cow\", \"dog\", \"pig\", \"tractor\", \"empty\", \"sheep\", \"cow\", \"empty\",\"empty\", \"tractor\", \"pig\",\"sheep\", \"dog\", \"empty\", \"sheep\", \"cow\", \"pig\", \"end\")\n\n  bonus <- rep(0,40)\n  bonus[c(4,8,22,35,39)] <- 1\n\n  #Initialize some iteration variables to store counts to output\n  totalSpaces <- 0;\n  numChicks <- 0\n  totalSpins <- 0\n  numFox <- 0\n  stolenChicks <- 0\n  numBonus <- 0\n\n\n  while(TRUE){\n    #spin the spinner\n    c_spin <- sample(spinner,1)\n    totalSpins <- totalSpins + 1\n \n    #Check if the player spun fox, if so steal a chick if there is one to steal and spin again.\n    if(c_spin == \"fox\"){\n      numChicks <- max(0,numChicks-1)\n      numFox <- numFox + 1\n      next\n    }\n   \n    #find how many spaces it is till the next item spun on the gameboard.\n    cut <- min(which(board==c_spin))\n \n    #If the board ends before the next item spun shows up, it will retun 'Inf' so we'll\n    #just set it to be the remaining number of spaces left on the board.\n    if(cut == \"Inf\") cut <- length(board)\n    totalSpaces <- totalSpaces + cut\n \n    if(bonus[totalSpaces]==1) numBonus <- numBonus + 1\n    numChicks <- numChicks + cut + bonus[totalSpaces]\n    board <- board[-c(1:cut)]\n    if(length(board) == 0){ break}\n  }\n  data.frame(chicks = numChicks, foxes = numFox, bonus = numBonus, spins = totalSpins)\n}\n\n```\n\n**Play 10,000 games and record the results**\n\n```{r}\nregisterDoParallel(cores=7)\nstacked <- foreach(i=1:10000, .combine = rbind) %dopar% playGame()\n\n```\n\n**Plot the results**\n\n```{r}\nwin_prop <- round(mean(stacked$chicks >= 40),2)*100\n\nstacked |>\n  mutate(cc = if_else(chicks >= 40,str_glue(\"Won ({win_prop}%)\"),str_glue(\"Lost ({100-win_prop}%)\"))) |>\n  #count(chicks) |>\n  ggplot(aes(x = chicks, fill = cc)) +\n  geom_histogram(binwidth = 1, color = \"black\") +\n  scale_fill_manual(values = c(\"#8795E8\", \"#FF7FD9\")) +\n  labs(x = \"Total Number of Chicks at end of game\",\n       y = \"Number of Games\",\n       title = str_glue(\"Results of 10,000 games played.\"),\n       title2 = \"sdf\",\n       fill = \"Results\")\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"highlight-style":"eiffel","output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.55","editor":"visual","theme":{"dark":"darkly","light":"cosmo"},"title-block-banner":true,"title":"Count Your Chickens!","author":"Milt","date":"2022-10-12","categories":["Data Science/Programming"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}